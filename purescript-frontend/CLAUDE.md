# PureScript Frontend - Development Workflow

## Quick Start

### Initial Setup
```bash
npm install
```

### Development Workflow

1. **Build CSS** (do this once, or when you change themes):
   ```bash
   npm run build:css
   ```

2. **Bundle PureScript** (do this after any .purs file changes):
   ```bash
   npm run bundle
   ```

3. **Start the dev server**:
   ```bash
   npm run dev
   ```

4. **Open in browser**:
   - Worker page: http://localhost:4000/worker.html
   - Standings page: http://localhost:4000/index.html?userId=2&tournamentId=135&divisionId=237

### Full Rebuild
```bash
npm run build:css && npm run bundle
```

### Watch Mode (Advanced)

If you want auto-rebuild on file changes, run these in separate terminals:

**Terminal 1** - Watch PureScript:
```bash
npm run watch
```

**Terminal 2** - Watch CSS:
```bash
npm run watch:css
```

**Terminal 3** - Dev Server:
```bash
npm run dev
```

Then manually re-run `npm run bundle` after the watch compiles your changes.

## Current Issues

### Background Color Problem
- The background should be light amber/orange/yellow gradient
- Currently showing black
- Theme is loading correctly (see console: "Using theme: scrabble")
- CSS classes are in styles.css
- Issue is either body background or div not rendering

### Performance Issue
- bundle.js is hanging for 20+ seconds before executing
- File size is only 273KB so should be instant
- Investigating if it's an import issue or execution issue

## File Structure

- `src/Main.purs` - Entry point for standings page
- `src/WorkerMain.purs` - Entry point for worker page
- `src/Component/Standings.purs` - Standings component
- `src/Config/Themes.purs` - Theme configurations (line 39 has scrabble pageBackground)
- `src/index.css` - Tailwind CSS source
- `public/` - Static files served by http-server
- `output/` - Compiled PureScript modules (generated by spago)

## Build Scripts

- `npm run build` - Build CSS + compile PureScript
- `npm run build:css` - Build Tailwind CSS to public/styles.css
- `npm run bundle` - Compile PureScript + bundle with esbuild
- `npm run watch` - Watch PureScript files and recompile
- `npm run watch:css` - Watch CSS and rebuild
- `npm run dev` - Start http-server on port 4000

## Troubleshooting

### Page won't load
- Make sure `npm run dev` is running
- Check that bundle.js and styles.css exist in public/

### Changes not showing
- Did you run `npm run bundle` after editing .purs files?
- Did you run `npm run build:css` after editing themes?
- Hard refresh the browser (Cmd+Shift+R or Ctrl+Shift+R)

### Port 4000 already in use
```bash
lsof -ti:4000 | xargs kill -9
```
