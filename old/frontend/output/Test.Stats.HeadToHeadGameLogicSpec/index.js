// Generated by purs version 0.15.15
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Stats_HeadToHeadGameLogic from "../Stats.HeadToHeadGameLogic/index.js";
import * as Test_Spec from "../Test.Spec/index.js";
import * as Test_Spec_Assertions from "../Test.Spec.Assertions/index.js";
var describe = /* #__PURE__ */ Test_Spec.describe(Data_Identity.monadIdentity);
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit);
var discard1 = /* #__PURE__ */ discard(/* #__PURE__ */ Test_Spec.bindSpecT(Data_Identity.bindIdentity));
var it = /* #__PURE__ */ Test_Spec.it(Data_Identity.monadIdentity)(Test_Spec.exampleMUnit);
var discard2 = /* #__PURE__ */ discard(Effect_Aff.bindAff);
var shouldEqual = /* #__PURE__ */ Test_Spec_Assertions.shouldEqual(Effect_Aff.monadThrowAff);
var shouldEqual1 = /* #__PURE__ */ shouldEqual(Data_Show.showInt)(Data_Eq.eqInt);
var shouldEqual2 = /* #__PURE__ */ shouldEqual(Data_Show.showBoolean)(Data_Eq.eqBoolean);
var shouldEqual3 = /* #__PURE__ */ shouldEqual(Data_Show.showString)(Data_Eq.eqString);
var mockH2HGameReversed = function (p1Id) {
    return function (p1Score) {
        return function (p2Score) {
            return {
                tournamentName: new Data_Maybe.Just("Test Tournament"),
                isCurrentTournament: false,
                game: {
                    player1: {
                        playerid: 999,
                        score: p2Score,
                        name: "Opponent",
                        position: Data_Maybe.Nothing.value,
                        oldrating: 1500,
                        newrating: 1520
                    },
                    player2: {
                        playerid: p1Id,
                        score: p1Score,
                        name: "Player 1",
                        position: Data_Maybe.Nothing.value,
                        oldrating: 1500,
                        newrating: 1480
                    },
                    date: "2024-01-01",
                    tourneyname: new Data_Maybe.Just("Test Tournament"),
                    gameid: 2,
                    annotated: Data_Maybe.Nothing.value
                }
            };
        };
    };
};
var mockH2HGame = function (p1Id) {
    return function (p1Score) {
        return function (p2Score) {
            return {
                tournamentName: new Data_Maybe.Just("Test Tournament"),
                isCurrentTournament: false,
                game: {
                    player1: {
                        playerid: p1Id,
                        score: p1Score,
                        name: "Player 1",
                        position: Data_Maybe.Nothing.value,
                        oldrating: 1500,
                        newrating: 1520
                    },
                    player2: {
                        playerid: 999,
                        score: p2Score,
                        name: "Opponent",
                        position: Data_Maybe.Nothing.value,
                        oldrating: 1500,
                        newrating: 1480
                    },
                    date: "2024-01-01",
                    tourneyname: new Data_Maybe.Just("Test Tournament"),
                    gameid: 1,
                    annotated: Data_Maybe.Nothing.value
                }
            };
        };
    };
};
var spec = /* #__PURE__ */ describe("Stats.HeadToHeadGameLogic")(/* #__PURE__ */ discard1(/* #__PURE__ */ describe("calculateGameResult")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("calculates win for player 1")(/* #__PURE__ */ (function () {
    var game = mockH2HGame(100)(450)(400);
    var result = Stats_HeadToHeadGameLogic.calculateGameResult(100)(game);
    return discard2(shouldEqual1(result.p1Score)(450))(function () {
        return discard2(shouldEqual1(result.p2Score)(400))(function () {
            return discard2(shouldEqual2(result.isTie)(false))(function () {
                return discard2(shouldEqual2(result.p1Won)(true))(function () {
                    return discard2(shouldEqual2(result.p1Lost)(false))(function () {
                        return discard2(shouldEqual3(result.p1Result)("W"))(function () {
                            return discard2(shouldEqual3(result.p2Result)("L"))(function () {
                                return discard2(shouldEqual3(result.scores)("450-400"))(function () {
                                    return discard2(shouldEqual3(result.p1Color)("text-red-600"))(function () {
                                        return shouldEqual3(result.p2Color)("text-blue-600");
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
})()))(function () {
    return discard1(it("calculates loss for player 1")((function () {
        var game = mockH2HGame(100)(350)(450);
        var result = Stats_HeadToHeadGameLogic.calculateGameResult(100)(game);
        return discard2(shouldEqual2(result.p1Won)(false))(function () {
            return discard2(shouldEqual2(result.p1Lost)(true))(function () {
                return discard2(shouldEqual2(result.isTie)(false))(function () {
                    return discard2(shouldEqual3(result.p1Result)("L"))(function () {
                        return discard2(shouldEqual3(result.p2Result)("W"))(function () {
                            return discard2(shouldEqual3(result.scores)("350-450"))(function () {
                                return discard2(shouldEqual3(result.p1Color)("text-blue-600"))(function () {
                                    return shouldEqual3(result.p2Color)("text-red-600");
                                });
                            });
                        });
                    });
                });
            });
        });
    })()))(function () {
        return discard1(it("calculates tie")((function () {
            var game = mockH2HGame(100)(400)(400);
            var result = Stats_HeadToHeadGameLogic.calculateGameResult(100)(game);
            return discard2(shouldEqual2(result.p1Won)(false))(function () {
                return discard2(shouldEqual2(result.p1Lost)(false))(function () {
                    return discard2(shouldEqual2(result.isTie)(true))(function () {
                        return discard2(shouldEqual3(result.p1Result)("T"))(function () {
                            return discard2(shouldEqual3(result.p2Result)("T"))(function () {
                                return discard2(shouldEqual3(result.scores)("400-400"))(function () {
                                    return discard2(shouldEqual3(result.p1Color)("text-black"))(function () {
                                        return shouldEqual3(result.p2Color)("text-black");
                                    });
                                });
                            });
                        });
                    });
                });
            });
        })()))(function () {
            return it("handles player 1 as player2 in game data")((function () {
                var game = mockH2HGameReversed(100)(400)(450);
                var result = Stats_HeadToHeadGameLogic.calculateGameResult(100)(game);
                return discard2(shouldEqual2(result.p1Won)(false))(function () {
                    return discard2(shouldEqual2(result.p1Lost)(true))(function () {
                        return discard2(shouldEqual1(result.p1Score)(400))(function () {
                            return shouldEqual1(result.p2Score)(450);
                        });
                    });
                });
            })());
        });
    });
})))(function () {
    return describe("getTournamentLocation")(discard1(it("uses tournamentName when available")((function () {
        var game = {
            tournamentName: new Data_Maybe.Just("Seattle Open"),
            isCurrentTournament: false,
            game: {
                player1: {
                    playerid: 100,
                    score: 400,
                    name: "P1",
                    oldrating: 1500,
                    newrating: 1520,
                    position: Data_Maybe.Nothing.value
                },
                player2: {
                    playerid: 200,
                    score: 380,
                    name: "P2",
                    oldrating: 1500,
                    newrating: 1490,
                    position: Data_Maybe.Nothing.value
                },
                date: "2024-01-01",
                tourneyname: new Data_Maybe.Just("Old Name"),
                gameid: 1,
                annotated: Data_Maybe.Nothing.value
            }
        };
        return shouldEqual3(Stats_HeadToHeadGameLogic.getTournamentLocation(game))("Seattle Open");
    })()))(function () {
        return discard1(it("falls back to tourneyname")((function () {
            var game = {
                tournamentName: Data_Maybe.Nothing.value,
                isCurrentTournament: false,
                game: {
                    player1: {
                        playerid: 100,
                        score: 400,
                        name: "P1",
                        oldrating: 1500,
                        newrating: 1520,
                        position: Data_Maybe.Nothing.value
                    },
                    player2: {
                        playerid: 200,
                        score: 380,
                        name: "P2",
                        oldrating: 1500,
                        newrating: 1490,
                        position: Data_Maybe.Nothing.value
                    },
                    date: "2024-01-01",
                    tourneyname: new Data_Maybe.Just("Fallback Name"),
                    gameid: 2,
                    annotated: Data_Maybe.Nothing.value
                }
            };
            return shouldEqual3(Stats_HeadToHeadGameLogic.getTournamentLocation(game))("Fallback Name");
        })()))(function () {
            return it("uses 'Tournament' when both are Nothing")((function () {
                var game = {
                    tournamentName: Data_Maybe.Nothing.value,
                    isCurrentTournament: false,
                    game: {
                        player1: {
                            playerid: 100,
                            score: 400,
                            name: "P1",
                            oldrating: 1500,
                            newrating: 1520,
                            position: Data_Maybe.Nothing.value
                        },
                        player2: {
                            playerid: 200,
                            score: 380,
                            name: "P2",
                            oldrating: 1500,
                            newrating: 1490,
                            position: Data_Maybe.Nothing.value
                        },
                        date: "2024-01-01",
                        tourneyname: Data_Maybe.Nothing.value,
                        gameid: 3,
                        annotated: Data_Maybe.Nothing.value
                    }
                };
                return shouldEqual3(Stats_HeadToHeadGameLogic.getTournamentLocation(game))("Tournament");
            })());
        });
    }));
}));
export {
    spec,
    mockH2HGame,
    mockH2HGameReversed
};
