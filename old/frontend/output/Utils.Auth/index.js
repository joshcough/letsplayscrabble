// Generated by purs version 0.15.15
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Int from "../Data.Int/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Web_HTML from "../Web.HTML/index.js";
import * as Web_HTML_Window from "../Web.HTML.Window/index.js";
import * as Web_Storage_Storage from "../Web.Storage.Storage/index.js";
var bind1 = /* #__PURE__ */ Control_Bind.bind(Data_Maybe.bindMaybe);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var usernameKey = "username";
var userIdKey = "user_id";
var getUsername = function __do() {
    var w = Web_HTML.window();
    var storage = Web_HTML_Window.localStorage(w)();
    return Web_Storage_Storage.getItem(usernameKey)(storage)();
};
var getUserId = function __do() {
    var w = Web_HTML.window();
    var storage = Web_HTML_Window.localStorage(w)();
    var maybeIdStr = Web_Storage_Storage.getItem(userIdKey)(storage)();
    return bind1(maybeIdStr)(Data_Int.fromString);
};
var authTokenKey = "auth_token";
var clearAuth = function __do() {
    var w = Web_HTML.window();
    var storage = Web_HTML_Window.localStorage(w)();
    Web_Storage_Storage.removeItem(authTokenKey)(storage)();
    Web_Storage_Storage.removeItem(userIdKey)(storage)();
    return Web_Storage_Storage.removeItem(usernameKey)(storage)();
};
var getAuthToken = function __do() {
    var w = Web_HTML.window();
    var storage = Web_HTML_Window.localStorage(w)();
    return Web_Storage_Storage.getItem(authTokenKey)(storage)();
};
var isAuthenticated = function __do() {
    var token = getAuthToken();
    return Data_Maybe.isJust(token);
};
var saveAuth = function (auth) {
    return function __do() {
        var w = Web_HTML.window();
        var storage = Web_HTML_Window.localStorage(w)();
        Web_Storage_Storage.setItem(authTokenKey)(auth.token)(storage)();
        Web_Storage_Storage.setItem(userIdKey)(show(auth.userId))(storage)();
        return Web_Storage_Storage.setItem(usernameKey)(auth.username)(storage)();
    };
};
export {
    authTokenKey,
    userIdKey,
    usernameKey,
    saveAuth,
    getAuthToken,
    clearAuth,
    isAuthenticated,
    getUserId,
    getUsername
};
