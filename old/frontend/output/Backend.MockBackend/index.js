// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Bind from "../Control.Bind/index.js";
import * as Control_Monad_Error_Class from "../Control.Monad.Error.Class/index.js";
import * as Control_Monad_Except_Trans from "../Control.Monad.Except.Trans/index.js";
import * as Control_Monad_State_Class from "../Control.Monad.State.Class/index.js";
import * as Control_Monad_State_Trans from "../Control.Monad.State.Trans/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Domain_Types from "../Domain.Types/index.js";
import * as Effect_Exception from "../Effect.Exception/index.js";
var monadStateT = /* #__PURE__ */ Control_Monad_State_Trans.monadStateT(Data_Identity.monadIdentity);
var append = /* #__PURE__ */ Data_Semigroup.append(Data_Semigroup.semigroupArray);
var show = /* #__PURE__ */ Data_Show.show(Domain_Types.showTournamentId);
var MockBackend = function (x) {
    return x;
};
var monadThrowErrorMockBacken = /* #__PURE__ */ Control_Monad_Except_Trans.monadThrowExceptT(monadStateT);
var throwError = /* #__PURE__ */ Control_Monad_Error_Class.throwError(monadThrowErrorMockBacken);
var monadStateMockStateMockBa = /* #__PURE__ */ Control_Monad_Except_Trans.monadStateExceptT(/* #__PURE__ */ Control_Monad_State_Trans.monadStateStateT(Data_Identity.monadIdentity));
var get = /* #__PURE__ */ Control_Monad_State_Class.get(monadStateMockStateMockBa);
var put = /* #__PURE__ */ Control_Monad_State_Class.put(monadStateMockStateMockBa);
var monadMockBackend = /* #__PURE__ */ Control_Monad_Except_Trans.monadExceptT(monadStateT);
var monadErrorErrorMockBacken = /* #__PURE__ */ Control_Monad_Except_Trans.monadErrorExceptT(monadStateT);
var functorMockBackend = /* #__PURE__ */ Control_Monad_Except_Trans.functorExceptT(/* #__PURE__ */ Control_Monad_State_Trans.functorStateT(Data_Identity.functorIdentity));
var bindMockBackend = /* #__PURE__ */ Control_Monad_Except_Trans.bindExceptT(monadStateT);
var bind = /* #__PURE__ */ Control_Bind.bind(bindMockBackend);
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit)(bindMockBackend);
var applyMockBackend = /* #__PURE__ */ Control_Monad_Except_Trans.applyExceptT(monadStateT);
var applicativeMockBackend = /* #__PURE__ */ Control_Monad_Except_Trans.applicativeExceptT(monadStateT);
var pure = /* #__PURE__ */ Control_Applicative.pure(applicativeMockBackend);
var monadBackendMockBackend = {
    login: function (credentials) {
        return bind(get)(function (state) {
            if (state.loginSuccess) {
                return pure({
                    token: "mock-token",
                    userId: 1,
                    username: credentials.username
                });
            };
            return throwError(Effect_Exception.error(Data_Maybe.fromMaybe("Login failed")(state.lastError)));
        });
    },
    createTournament: function (params) {
        var tournament = {
            id: 999,
            name: params.name,
            city: params.city,
            year: params.year,
            lexicon: params.lexicon,
            longFormName: params.longFormName,
            dataUrl: params.dataUrl,
            pollUntil: Data_Maybe.Nothing.value,
            theme: params.theme,
            transparentBackground: false
        };
        return bind(get)(function (state) {
            return discard(put((function () {
                var $37 = {};
                for (var $38 in state) {
                    if ({}.hasOwnProperty.call(state, $38)) {
                        $37[$38] = state[$38];
                    };
                };
                $37.tournaments = append(state.tournaments)([ tournament ]);
                return $37;
            })()))(function () {
                return pure(tournament);
            });
        });
    },
    listTournaments: /* #__PURE__ */ bind(get)(function (state) {
        return pure(state.tournaments);
    }),
    getTournamentRow: function (_userId) {
        return function (_tournamentId) {
            return bind(get)(function (state) {
                var v = Data_Array.head(state.tournaments);
                if (v instanceof Data_Maybe.Nothing) {
                    return throwError(Effect_Exception.error("Tournament not found"));
                };
                if (v instanceof Data_Maybe.Just) {
                    return pure(v.value0);
                };
                throw new Error("Failed pattern match at Backend.MockBackend (line 79, column 5 - line 81, column 23): " + [ v.constructor.name ]);
            });
        };
    },
    updateTournament: function (tournamentId) {
        return function (params) {
            var tournament = {
                id: tournamentId,
                name: params.name,
                city: params.city,
                year: params.year,
                lexicon: params.lexicon,
                longFormName: params.longFormName,
                dataUrl: params.dataUrl,
                pollUntil: Data_Maybe.Nothing.value,
                theme: params.theme,
                transparentBackground: false
            };
            return pure(tournament);
        };
    },
    enablePolling: function (tournamentId) {
        return function (_days) {
            return pure("Polling enabled for tournament " + show(tournamentId));
        };
    },
    stopPolling: function (_tournamentId) {
        return pure(Data_Unit.unit);
    },
    clearCache: /* #__PURE__ */ pure(Data_Unit.unit),
    refetchTournament: function (tournamentId) {
        return pure("Refetched tournament " + show(tournamentId));
    },
    fullRefetchTournament: function (tournamentId) {
        return pure("Full refetch for tournament " + show(tournamentId));
    },
    getCurrentMatch: function (_userId) {
        return bind(get)(function (state) {
            var v = Data_Array.head(state.currentMatches);
            if (v instanceof Data_Maybe.Nothing) {
                return pure(Data_Maybe.Nothing.value);
            };
            if (v instanceof Data_Maybe.Just) {
                return pure(new Data_Maybe.Just(v.value0));
            };
            throw new Error("Failed pattern match at Backend.MockBackend (line 115, column 5 - line 117, column 38): " + [ v.constructor.name ]);
        });
    },
    getTournament: function (_userId) {
        return function (tournamentId) {
            var tournament = {
                id: tournamentId,
                name: "Mock Tournament",
                city: "Mock City",
                year: 2025,
                lexicon: "TWL",
                longFormName: "Mock Tournament 2025",
                dataUrl: "http://example.com",
                theme: "scrabble",
                transparentBackground: false,
                divisions: [  ]
            };
            return pure(tournament);
        };
    },
    setCurrentMatch: function (request) {
        var match = {
            tournamentId: request.tournamentId,
            divisionId: request.divisionId,
            divisionName: "Division A",
            round: request.round,
            pairingId: request.pairingId,
            updatedAt: "2025-12-08T00:00:00Z"
        };
        return bind(get)(function (state) {
            return discard(put((function () {
                var $44 = {};
                for (var $45 in state) {
                    if ({}.hasOwnProperty.call(state, $45)) {
                        $44[$45] = state[$45];
                    };
                };
                $44.currentMatches = append([ match ])(state.currentMatches);
                return $44;
            })()))(function () {
                return pure(match);
            });
        });
    },
    MonadError0: function () {
        return monadErrorErrorMockBacken;
    }
};
var initialMockState = /* #__PURE__ */ (function () {
    return {
        tournaments: [  ],
        currentMatches: [  ],
        loginSuccess: true,
        lastError: Data_Maybe.Nothing.value
    };
})();
export {
    initialMockState,
    MockBackend,
    functorMockBackend,
    applyMockBackend,
    applicativeMockBackend,
    bindMockBackend,
    monadMockBackend,
    monadStateMockStateMockBa,
    monadThrowErrorMockBacken,
    monadErrorErrorMockBacken,
    monadBackendMockBackend
};
