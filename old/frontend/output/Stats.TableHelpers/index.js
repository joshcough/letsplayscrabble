// Generated by purs version 0.15.15
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Renderer_PictureRenderer from "../Renderer.PictureRenderer/index.js";
import * as Utils_PlayerImage from "../Utils.PlayerImage/index.js";
var mapFlipped = /* #__PURE__ */ Data_Functor.mapFlipped(Data_Functor.functorArray);
var calculateTopPlayers = function (n) {
    return function (calculator) {
        return function (tournamentData) {
            return Data_Array.take(n)(calculator(tournamentData.division.players)(tournamentData.division.games));
        };
    };
};
var buildDivisionSubtitle = function (tournamentData) {
    return tournamentData.tournament.name + (" " + (tournamentData.tournament.lexicon + (" \u2022 " + tournamentData.division.name)));
};
var buildTableData = function (title) {
    return function (columns) {
        return function (rowMapper) {
            return function (calculator) {
                return function (tournamentData) {
                    var topPlayers = calculateTopPlayers(10)(calculator)(tournamentData);
                    return {
                        title: title,
                        subtitle: buildDivisionSubtitle(tournamentData),
                        columns: columns,
                        rows: mapFlipped(topPlayers)(rowMapper)
                    };
                };
            };
        };
    };
};
var renderPictureOverlayWithStats = function (title) {
    return function (calculator) {
        return function (statsRenderer) {
            return function (state) {
                return function (tournamentData) {
                    var top5 = calculateTopPlayers(5)(calculator)(tournamentData);
                    var pictureData = {
                        title: title,
                        subtitle: buildDivisionSubtitle(tournamentData),
                        players: mapFlipped(top5)(function (player) {
                            return {
                                rank: player.rank,
                                name: player.name,
                                imageUrl: Utils_PlayerImage.getPlayerImageUrl(tournamentData.tournament.dataUrl)(player.photo)(player.xtPhotoUrl),
                                stats: statsRenderer(state.theme)(player)
                            };
                        })
                    };
                    return Renderer_PictureRenderer.renderPictureOverlay(state.theme)(pictureData);
                };
            };
        };
    };
};
export {
    buildDivisionSubtitle,
    calculateTopPlayers,
    renderPictureOverlayWithStats,
    buildTableData
};
