// Generated by purs version 0.15.15
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Bind from "../Control.Bind/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Identity from "../Data.Identity/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect_Aff from "../Effect.Aff/index.js";
import * as Stats_TournamentStats from "../Stats.TournamentStats/index.js";
import * as Test_Spec from "../Test.Spec/index.js";
import * as Test_Spec_Assertions from "../Test.Spec.Assertions/index.js";
import * as Test_Utils_TestHelpers from "../Test.Utils.TestHelpers/index.js";
var describe = /* #__PURE__ */ Test_Spec.describe(Data_Identity.monadIdentity);
var discard = /* #__PURE__ */ Control_Bind.discard(Control_Bind.discardUnit);
var discard1 = /* #__PURE__ */ discard(/* #__PURE__ */ Test_Spec.bindSpecT(Data_Identity.bindIdentity));
var it = /* #__PURE__ */ Test_Spec.it(Data_Identity.monadIdentity)(Test_Spec.exampleMUnit);
var shouldEqual = /* #__PURE__ */ Test_Spec_Assertions.shouldEqual(Effect_Aff.monadThrowAff);
var shouldEqual1 = /* #__PURE__ */ shouldEqual(Data_Show.showInt)(Data_Eq.eqInt);
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect_Aff.applicativeAff);
var discard2 = /* #__PURE__ */ discard(Effect_Aff.bindAff);
var shouldEqual2 = /* #__PURE__ */ shouldEqual(Data_Show.showString)(Data_Eq.eqString);
var shouldEqual3 = /* #__PURE__ */ shouldEqual(Data_Show.showNumber)(Data_Eq.eqNumber);
var spec = /* #__PURE__ */ describe("TournamentStats (Pure Calculation Functions)")(/* #__PURE__ */ discard1(/* #__PURE__ */ describe("calculateRatingGainPlayers")(/* #__PURE__ */ discard1(/* #__PURE__ */ it("calculates ranked stats sorted by rating gain")(/* #__PURE__ */ (function () {
    var players = Stats_TournamentStats.calculateRatingGainPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
    return shouldEqual1(Data_Array.length(players))(2);
})()))(function () {
    return discard1(it("returns correct player data structure with rank")((function () {
        var players = Stats_TournamentStats.calculateRatingGainPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
        var v = Data_Array.index(players)(0);
        if (v instanceof Data_Maybe.Just) {
            return shouldEqual1(v.value0.rank)(1);
        };
        if (v instanceof Data_Maybe.Nothing) {
            return pure(Data_Unit.unit);
        };
        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 31, column 9 - line 34, column 31): " + [ v.constructor.name ]);
    })()))(function () {
        return discard1(it("ranks players by rating gain (last rating - initial rating)")((function () {
            var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayerWithRatings({
                playerId: 1,
                name: "Alice",
                initialRating: 1500,
                ratingsHistory: [ 1520, 1540, 1560 ]
            }), Test_Utils_TestHelpers.createPlayerWithRatings({
                playerId: 2,
                name: "Bob",
                initialRating: 1450,
                ratingsHistory: [ 1470, 1480 ]
            }), Test_Utils_TestHelpers.createPlayerWithRatings({
                playerId: 3,
                name: "Carol",
                initialRating: 1600,
                ratingsHistory: [ 1590, 1580 ]
            }) ])([  ]);
            var ratingGain = Stats_TournamentStats.calculateRatingGainPlayers(division.players)(division.games);
            return discard2((function () {
                var v = Data_Array.index(ratingGain)(0);
                if (v instanceof Data_Maybe.Just) {
                    return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                        return discard2(shouldEqual1(v.value0.ratingDiff)(60))(function () {
                            return discard2(shouldEqual1(v.value0.initialRating)(1500))(function () {
                                return shouldEqual1(v.value0.currentRating)(1560);
                            });
                        });
                    });
                };
                if (v instanceof Data_Maybe.Nothing) {
                    return pure(Data_Unit.unit);
                };
                throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 47, column 9 - line 53, column 31): " + [ v.constructor.name ]);
            })())(function () {
                return discard2((function () {
                    var v = Data_Array.index(ratingGain)(1);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Bob"))(function () {
                            return shouldEqual1(v.value0.ratingDiff)(30);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 55, column 9 - line 59, column 31): " + [ v.constructor.name ]);
                })())(function () {
                    var v = Data_Array.index(ratingGain)(2);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Carol"))(function () {
                            return shouldEqual1(v.value0.ratingDiff)(-20 | 0);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 61, column 9 - line 65, column 31): " + [ v.constructor.name ]);
                });
            });
        })()))(function () {
            return discard1(it("handles players with empty ratings history (uses initial rating)")((function () {
                var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayerWithRatings({
                    playerId: 1,
                    name: "Alice",
                    initialRating: 1500,
                    ratingsHistory: [  ]
                }), Test_Utils_TestHelpers.createPlayerWithRatings({
                    playerId: 2,
                    name: "Bob",
                    initialRating: 1450,
                    ratingsHistory: [ 1480 ]
                }) ])([  ]);
                var ratingGain = Stats_TournamentStats.calculateRatingGainPlayers(division.players)(division.games);
                return discard2((function () {
                    var v = Data_Array.index(ratingGain)(0);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Bob"))(function () {
                            return shouldEqual1(v.value0.ratingDiff)(30);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 77, column 9 - line 81, column 31): " + [ v.constructor.name ]);
                })())(function () {
                    var v = Data_Array.index(ratingGain)(1);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                            return discard2(shouldEqual1(v.value0.ratingDiff)(0))(function () {
                                return shouldEqual1(v.value0.currentRating)(1500);
                            });
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 83, column 9 - line 88, column 31): " + [ v.constructor.name ]);
                });
            })()))(function () {
                return discard1(it("handles single rating in history")((function () {
                    var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayerWithRatings({
                        playerId: 1,
                        name: "Alice",
                        initialRating: 1500,
                        ratingsHistory: [ 1550 ]
                    }) ])([  ]);
                    var ratingGain = Stats_TournamentStats.calculateRatingGainPlayers(division.players)(division.games);
                    var v = Data_Array.index(ratingGain)(0);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual1(v.value0.ratingDiff)(50))(function () {
                            return shouldEqual1(v.value0.currentRating)(1550);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 98, column 9 - line 102, column 31): " + [ v.constructor.name ]);
                })()))(function () {
                    return it("handles negative rating changes")((function () {
                        var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayerWithRatings({
                            playerId: 1,
                            name: "Alice",
                            initialRating: 1500,
                            ratingsHistory: [ 1490, 1470 ]
                        }), Test_Utils_TestHelpers.createPlayerWithRatings({
                            playerId: 2,
                            name: "Bob",
                            initialRating: 1450,
                            ratingsHistory: [ 1440, 1420 ]
                        }), Test_Utils_TestHelpers.createPlayerWithRatings({
                            playerId: 3,
                            name: "Carol",
                            initialRating: 1600,
                            ratingsHistory: [ 1580, 1550 ]
                        }) ])([  ]);
                        var ratingGain = Stats_TournamentStats.calculateRatingGainPlayers(division.players)(division.games);
                        return discard2((function () {
                            var v = Data_Array.index(ratingGain)(0);
                            if (v instanceof Data_Maybe.Just) {
                                return shouldEqual1(v.value0.ratingDiff)(-30 | 0);
                            };
                            if (v instanceof Data_Maybe.Nothing) {
                                return pure(Data_Unit.unit);
                            };
                            throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 115, column 9 - line 119, column 31): " + [ v.constructor.name ]);
                        })())(function () {
                            var v = Data_Array.index(ratingGain)(2);
                            if (v instanceof Data_Maybe.Just) {
                                return discard2(shouldEqual2(v.value0.name)("Carol"))(function () {
                                    return shouldEqual1(v.value0.ratingDiff)(-50 | 0);
                                });
                            };
                            if (v instanceof Data_Maybe.Nothing) {
                                return pure(Data_Unit.unit);
                            };
                            throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 121, column 9 - line 125, column 31): " + [ v.constructor.name ]);
                        });
                    })());
                });
            });
        });
    });
})))(function () {
    return discard1(describe("calculateHighScorePlayers")(discard1(it("calculates ranked stats sorted by high score")((function () {
        var players = Stats_TournamentStats.calculateHighScorePlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
        return shouldEqual1(Data_Array.length(players))(2);
    })()))(function () {
        return discard1(it("returns correct player data structure with rank")((function () {
            var players = Stats_TournamentStats.calculateHighScorePlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
            var v = Data_Array.index(players)(0);
            if (v instanceof Data_Maybe.Just) {
                return shouldEqual1(v.value0.rank)(1);
            };
            if (v instanceof Data_Maybe.Nothing) {
                return pure(Data_Unit.unit);
            };
            throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 142, column 9 - line 145, column 31): " + [ v.constructor.name ]);
        })()))(function () {
            return discard1(it("ranks players by highest single game score")((function () {
                var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500), Test_Utils_TestHelpers.createPlayer(3)("Carol")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                    gameId: 1,
                    round: 1,
                    player1: 1,
                    player2: 2,
                    score1: 525,
                    score2: 350
                }), Test_Utils_TestHelpers.createCompletedGame({
                    gameId: 2,
                    round: 1,
                    player1: 3,
                    player2: 1,
                    score1: 480,
                    score2: 420
                }), Test_Utils_TestHelpers.createCompletedGame({
                    gameId: 3,
                    round: 2,
                    player1: 2,
                    player2: 3,
                    score1: 550,
                    score2: 400
                }) ]);
                var highScores = Stats_TournamentStats.calculateHighScorePlayers(division.players)(division.games);
                return discard2((function () {
                    var v = Data_Array.index(highScores)(0);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Bob"))(function () {
                            return shouldEqual1(v.value0.highScore)(550);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 161, column 9 - line 165, column 31): " + [ v.constructor.name ]);
                })())(function () {
                    var v = Data_Array.index(highScores)(1);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                            return shouldEqual1(v.value0.highScore)(525);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 167, column 9 - line 171, column 31): " + [ v.constructor.name ]);
                });
            })()))(function () {
                return discard1(it("considers all games for each player")((function () {
                    var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 1,
                        round: 1,
                        player1: 1,
                        player2: 2,
                        score1: 400,
                        score2: 350
                    }), Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 2,
                        round: 2,
                        player1: 1,
                        player2: 2,
                        score1: 525,
                        score2: 420
                    }), Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 3,
                        round: 3,
                        player1: 1,
                        player2: 2,
                        score1: 450,
                        score2: 480
                    }) ]);
                    var highScores = Stats_TournamentStats.calculateHighScorePlayers(division.players)(division.games);
                    var v = Data_Array.index(highScores)(0);
                    if (v instanceof Data_Maybe.Just) {
                        return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                            return shouldEqual1(v.value0.highScore)(525);
                        });
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 186, column 9 - line 190, column 31): " + [ v.constructor.name ]);
                })()))(function () {
                    return discard1(it("ignores bye games when calculating high score")((function () {
                        var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 1,
                            round: 1,
                            player1: 1,
                            player2: 2,
                            score1: 450,
                            score2: 350
                        }), Test_Utils_TestHelpers.createByeGame(2)(2)(1) ]);
                        var highScores = Stats_TournamentStats.calculateHighScorePlayers(division.players)(division.games);
                        var v = Data_Array.index(highScores)(0);
                        if (v instanceof Data_Maybe.Just) {
                            return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                return shouldEqual1(v.value0.highScore)(450);
                            });
                        };
                        if (v instanceof Data_Maybe.Nothing) {
                            return pure(Data_Unit.unit);
                        };
                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 204, column 9 - line 208, column 31): " + [ v.constructor.name ]);
                    })()))(function () {
                        return it("handles players with no completed games")((function () {
                            var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500) ])([  ]);
                            var highScores = Stats_TournamentStats.calculateHighScorePlayers(division.players)(division.games);
                            var v = Data_Array.index(highScores)(0);
                            if (v instanceof Data_Maybe.Just) {
                                return shouldEqual1(v.value0.highScore)(0);
                            };
                            if (v instanceof Data_Maybe.Nothing) {
                                return pure(Data_Unit.unit);
                            };
                            throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 219, column 9 - line 222, column 31): " + [ v.constructor.name ]);
                        })());
                    });
                });
            });
        });
    })))(function () {
        return discard1(describe("calculateScoringLeadersPlayers")(discard1(it("calculates ranked stats sorted by average score")((function () {
            var players = Stats_TournamentStats.calculateScoringLeadersPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
            return shouldEqual1(Data_Array.length(players))(2);
        })()))(function () {
            return discard1(it("returns correct player data structure with rank")((function () {
                var players = Stats_TournamentStats.calculateScoringLeadersPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
                var v = Data_Array.index(players)(0);
                if (v instanceof Data_Maybe.Just) {
                    return shouldEqual1(v.value0.rank)(1);
                };
                if (v instanceof Data_Maybe.Nothing) {
                    return pure(Data_Unit.unit);
                };
                throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 239, column 9 - line 242, column 31): " + [ v.constructor.name ]);
            })()))(function () {
                return discard1(it("ranks players by average score")((function () {
                    var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500), Test_Utils_TestHelpers.createPlayer(3)("Carol")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 1,
                        round: 1,
                        player1: 1,
                        player2: 2,
                        score1: 450,
                        score2: 350
                    }), Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 2,
                        round: 1,
                        player1: 3,
                        player2: 1,
                        score1: 400,
                        score2: 420
                    }), Test_Utils_TestHelpers.createCompletedGame({
                        gameId: 3,
                        round: 2,
                        player1: 2,
                        player2: 3,
                        score1: 480,
                        score2: 460
                    }) ]);
                    var leaders = Stats_TournamentStats.calculateScoringLeadersPlayers(division.players)(division.games);
                    return discard2((function () {
                        var v = Data_Array.index(leaders)(0);
                        if (v instanceof Data_Maybe.Just) {
                            return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                return shouldEqual3(v.value0.averageScore)(435.0);
                            });
                        };
                        if (v instanceof Data_Maybe.Nothing) {
                            return pure(Data_Unit.unit);
                        };
                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 261, column 9 - line 265, column 31): " + [ v.constructor.name ]);
                    })())(function () {
                        var v = Data_Array.index(leaders)(1);
                        if (v instanceof Data_Maybe.Just) {
                            return discard2(shouldEqual2(v.value0.name)("Carol"))(function () {
                                return shouldEqual3(v.value0.averageScore)(430.0);
                            });
                        };
                        if (v instanceof Data_Maybe.Nothing) {
                            return pure(Data_Unit.unit);
                        };
                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 267, column 9 - line 271, column 31): " + [ v.constructor.name ]);
                    });
                })()))(function () {
                    return discard1(it("excludes bye games from average calculation")((function () {
                        var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 1,
                            round: 1,
                            player1: 1,
                            player2: 2,
                            score1: 450,
                            score2: 350
                        }), Test_Utils_TestHelpers.createByeGame(2)(2)(1), Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 3,
                            round: 3,
                            player1: 1,
                            player2: 2,
                            score1: 460,
                            score2: 360
                        }) ]);
                        var leaders = Stats_TournamentStats.calculateScoringLeadersPlayers(division.players)(division.games);
                        var v = Data_Array.index(leaders)(0);
                        if (v instanceof Data_Maybe.Just) {
                            return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                return shouldEqual3(v.value0.averageScore)(455.0);
                            });
                        };
                        if (v instanceof Data_Maybe.Nothing) {
                            return pure(Data_Unit.unit);
                        };
                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 286, column 9 - line 290, column 31): " + [ v.constructor.name ]);
                    })()))(function () {
                        return discard1(it("handles players with different numbers of games")((function () {
                            var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 1,
                                round: 1,
                                player1: 1,
                                player2: 2,
                                score1: 450,
                                score2: 350
                            }), Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 2,
                                round: 2,
                                player1: 1,
                                player2: 2,
                                score1: 440,
                                score2: 360
                            }), Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 3,
                                round: 3,
                                player1: 1,
                                player2: 2,
                                score1: 430,
                                score2: 370
                            }) ]);
                            var leaders = Stats_TournamentStats.calculateScoringLeadersPlayers(division.players)(division.games);
                            var v = Data_Array.index(leaders)(0);
                            if (v instanceof Data_Maybe.Just) {
                                return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                    return shouldEqual3(v.value0.averageScore)(440.0);
                                });
                            };
                            if (v instanceof Data_Maybe.Nothing) {
                                return pure(Data_Unit.unit);
                            };
                            throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 306, column 9 - line 310, column 31): " + [ v.constructor.name ]);
                        })()))(function () {
                            return it("handles players with no completed games")((function () {
                                var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500) ])([  ]);
                                var leaders = Stats_TournamentStats.calculateScoringLeadersPlayers(division.players)(division.games);
                                var v = Data_Array.index(leaders)(0);
                                if (v instanceof Data_Maybe.Just) {
                                    return shouldEqual3(v.value0.averageScore)(0.0);
                                };
                                if (v instanceof Data_Maybe.Nothing) {
                                    return pure(Data_Unit.unit);
                                };
                                throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 321, column 9 - line 324, column 31): " + [ v.constructor.name ]);
                            })());
                        });
                    });
                });
            });
        })))(function () {
            return describe("calculateStandingsPlayers")(discard1(it("calculates ranked stats sorted by standings")((function () {
                var players = Stats_TournamentStats.calculateStandingsPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
                return shouldEqual1(Data_Array.length(players))(2);
            })()))(function () {
                return discard1(it("returns correct player data structure with rank")((function () {
                    var players = Stats_TournamentStats.calculateStandingsPlayers(Test_Utils_TestHelpers.createMockDivisionData.division.players)(Test_Utils_TestHelpers.createMockDivisionData.division.games);
                    var v = Data_Array.index(players)(0);
                    if (v instanceof Data_Maybe.Just) {
                        return shouldEqual1(v.value0.rank)(1);
                    };
                    if (v instanceof Data_Maybe.Nothing) {
                        return pure(Data_Unit.unit);
                    };
                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 341, column 9 - line 344, column 31): " + [ v.constructor.name ]);
                })()))(function () {
                    return discard1(it("ranks players correctly by wins")((function () {
                        var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500), Test_Utils_TestHelpers.createPlayer(3)("Carol")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 1,
                            round: 1,
                            player1: 1,
                            player2: 2,
                            score1: 450,
                            score2: 350
                        }), Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 2,
                            round: 1,
                            player1: 3,
                            player2: 1,
                            score1: 400,
                            score2: 380
                        }), Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 3,
                            round: 2,
                            player1: 1,
                            player2: 3,
                            score1: 420,
                            score2: 400
                        }), Test_Utils_TestHelpers.createCompletedGame({
                            gameId: 4,
                            round: 2,
                            player1: 2,
                            player2: 1,
                            score1: 380,
                            score2: 360
                        }) ]);
                        var standings = Stats_TournamentStats.calculateStandingsPlayers(division.players)(division.games);
                        var v = Data_Array.index(standings)(0);
                        if (v instanceof Data_Maybe.Just) {
                            return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                return discard2(shouldEqual1(v.value0.wins)(2))(function () {
                                    return shouldEqual1(v.value0.losses)(2);
                                });
                            });
                        };
                        if (v instanceof Data_Maybe.Nothing) {
                            return pure(Data_Unit.unit);
                        };
                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 362, column 9 - line 367, column 31): " + [ v.constructor.name ]);
                    })()))(function () {
                        return discard1(it("uses spread to break ties when wins are equal")((function () {
                            var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500), Test_Utils_TestHelpers.createPlayer(3)("Carol")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 1,
                                round: 1,
                                player1: 1,
                                player2: 2,
                                score1: 450,
                                score2: 350
                            }), Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 2,
                                round: 1,
                                player1: 3,
                                player2: 2,
                                score1: 400,
                                score2: 350
                            }), Test_Utils_TestHelpers.createCompletedGame({
                                gameId: 3,
                                round: 2,
                                player1: 1,
                                player2: 3,
                                score1: 420,
                                score2: 400
                            }) ]);
                            var standings = Stats_TournamentStats.calculateStandingsPlayers(division.players)(division.games);
                            return discard2((function () {
                                var v = Data_Array.index(standings)(0);
                                if (v instanceof Data_Maybe.Just) {
                                    return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                        return discard2(shouldEqual1(v.value0.wins)(2))(function () {
                                            return discard2(shouldEqual1(v.value0.losses)(0))(function () {
                                                return shouldEqual1(v.value0.spread)(120);
                                            });
                                        });
                                    });
                                };
                                if (v instanceof Data_Maybe.Nothing) {
                                    return pure(Data_Unit.unit);
                                };
                                throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 386, column 9 - line 392, column 31): " + [ v.constructor.name ]);
                            })())(function () {
                                var v = Data_Array.index(standings)(1);
                                if (v instanceof Data_Maybe.Just) {
                                    return discard2(shouldEqual2(v.value0.name)("Carol"))(function () {
                                        return discard2(shouldEqual1(v.value0.wins)(1))(function () {
                                            return discard2(shouldEqual1(v.value0.losses)(1))(function () {
                                                return shouldEqual1(v.value0.spread)(30);
                                            });
                                        });
                                    });
                                };
                                if (v instanceof Data_Maybe.Nothing) {
                                    return pure(Data_Unit.unit);
                                };
                                throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 394, column 9 - line 400, column 31): " + [ v.constructor.name ]);
                            });
                        })()))(function () {
                            return discard1(it("handles bye games correctly")((function () {
                                var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500), Test_Utils_TestHelpers.createPlayer(3)("Carol")(1500) ])([ Test_Utils_TestHelpers.createCompletedGame({
                                    gameId: 1,
                                    round: 1,
                                    player1: 1,
                                    player2: 2,
                                    score1: 450,
                                    score2: 350
                                }), Test_Utils_TestHelpers.createByeGame(2)(1)(3), Test_Utils_TestHelpers.createCompletedGame({
                                    gameId: 3,
                                    round: 2,
                                    player1: 2,
                                    player2: 3,
                                    score1: 420,
                                    score2: 400
                                }) ]);
                                var standings = Stats_TournamentStats.calculateStandingsPlayers(division.players)(division.games);
                                return discard2((function () {
                                    var v = Data_Array.index(standings)(0);
                                    if (v instanceof Data_Maybe.Just) {
                                        return discard2(shouldEqual2(v.value0.name)("Alice"))(function () {
                                            return discard2(shouldEqual1(v.value0.wins)(1))(function () {
                                                return shouldEqual1(v.value0.losses)(0);
                                            });
                                        });
                                    };
                                    if (v instanceof Data_Maybe.Nothing) {
                                        return pure(Data_Unit.unit);
                                    };
                                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 419, column 9 - line 424, column 31): " + [ v.constructor.name ]);
                                })())(function () {
                                    return discard2((function () {
                                        var v = Data_Array.index(standings)(1);
                                        if (v instanceof Data_Maybe.Just) {
                                            return discard2(shouldEqual2(v.value0.name)("Carol"))(function () {
                                                return discard2(shouldEqual1(v.value0.wins)(1))(function () {
                                                    return discard2(shouldEqual1(v.value0.losses)(1))(function () {
                                                        return shouldEqual1(v.value0.spread)(30);
                                                    });
                                                });
                                            });
                                        };
                                        if (v instanceof Data_Maybe.Nothing) {
                                            return pure(Data_Unit.unit);
                                        };
                                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 427, column 9 - line 433, column 31): " + [ v.constructor.name ]);
                                    })())(function () {
                                        var v = Data_Array.index(standings)(2);
                                        if (v instanceof Data_Maybe.Just) {
                                            return discard2(shouldEqual2(v.value0.name)("Bob"))(function () {
                                                return discard2(shouldEqual1(v.value0.wins)(1))(function () {
                                                    return discard2(shouldEqual1(v.value0.losses)(1))(function () {
                                                        return shouldEqual1(v.value0.spread)(-80 | 0);
                                                    });
                                                });
                                            });
                                        };
                                        if (v instanceof Data_Maybe.Nothing) {
                                            return pure(Data_Unit.unit);
                                        };
                                        throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 435, column 9 - line 441, column 31): " + [ v.constructor.name ]);
                                    });
                                });
                            })()))(function () {
                                return it("handles players with no completed games")((function () {
                                    var division = Test_Utils_TestHelpers.createDivisionWith([ Test_Utils_TestHelpers.createPlayer(1)("Alice")(1500), Test_Utils_TestHelpers.createPlayer(2)("Bob")(1500) ])([  ]);
                                    var standings = Stats_TournamentStats.calculateStandingsPlayers(division.players)(division.games);
                                    var v = Data_Array.index(standings)(0);
                                    if (v instanceof Data_Maybe.Just) {
                                        return discard2(shouldEqual1(v.value0.wins)(0))(function () {
                                            return discard2(shouldEqual1(v.value0.losses)(0))(function () {
                                                return shouldEqual1(v.value0.spread)(0);
                                            });
                                        });
                                    };
                                    if (v instanceof Data_Maybe.Nothing) {
                                        return pure(Data_Unit.unit);
                                    };
                                    throw new Error("Failed pattern match at Test.Stats.TournamentStatsSpec (line 453, column 9 - line 458, column 31): " + [ v.constructor.name ]);
                                })());
                            });
                        });
                    });
                });
            }));
        });
    });
}));
export {
    spec
};
